# AWS API Gateway with HTTP Integrations

- we make a http gateway in which we make a route which send request to http server. 

- Go to api gateway service , create an API 
- Now we see 4 main types of API :- HTTP API , WebSocket API , Rest API, Rest API private 

- difference between rest api and rest api private means rest api are globally accessible by the people through internet whereas rest api private are accessible inside vpc 

- http api is very simple , small and low cost and can't enable many features 
- But in rest api , we get many extra features and functionalities like we can make our custom authorization . 


- we start with http api 
- first give name to api  (let's say exampleAPI)
- IP address type take ipv4
- in integratons, suppose we have 2 0r 3 microservices . say, example.com , learning-ocean.com. these are 2 different servers say. Now add integration http, method any , url learning-ocean.com, add one more integraion for example.com.
- now aws give you default resource path which you can change also , lets change /example and /learn
- means for this api gateway , if request comes in /example then it goes to example.com server and if request comes in /learn then it goes to learning-ocean.com server.
- now in stages , stage name is default and disable auto-deploy option
- now review everything and create 
- now deploy it 
- if we see in stages tab , we see one default stage . in api gateway we can manage multiple stages like devlopment, production ,staging. click on it we get url . open the url on differnt tab , we will get not found error 
- this is because we configure route on /example and /learn so on url write either /example or /learn
- now there might be problem with css as for security point of view css can't be accessed from anywhere 
- now we write /order ,/product or anything , this denotes we are going to different servers 


---

## 🚪 What is AWS API Gateway?

Think of **API Gateway** as a **front door** to your backend services (microservices). It receives requests from clients (like browsers or mobile apps), and:
- **Authenticates** the user
- **Authorizes** the request
- **Routes** the request to the correct microservice
- **Caches**, **monitors**, and **limits** traffic

---

## 🧭 Types of API Gateway in AWS

When you create an API in AWS API Gateway, you’ll see **four types**:

### 1. **HTTP API**
- ✅ Lightweight, fast, and low-cost
- ✅ Good for simple use cases
- ❌ Limited advanced features (like custom authorizers)
- 🔄 Supports RESTful routes and integrations

### 2. **REST API**
- ✅ Full-featured and flexible
- ✅ Supports custom authorizers, request/response transformations, usage plans
- ❌ More expensive and complex
- 🔄 Ideal for production-grade APIs

### 3. **WebSocket API**
- 🔄 Used for **real-time communication** (like chat apps)
- ✅ Maintains persistent connections
- ❌ Not for REST-style APIs

### 4. **REST API (Private)**
- 🔒 Same as REST API, but only accessible **inside your VPC**
- ✅ Used for internal services

---

## 🛠️ Step-by-Step: Creating an HTTP API (based on your notes)

### ✅ Step 1: Create API
- Choose **HTTP API**
- Give it a name (e.g., `exampleAPI`)
- Choose IP type (IPv4 is fine)

### ✅ Step 2: Add Integrations
- Integrations are **where the request goes**
- You can add multiple integrations:
  - `/example` → `https://example.com`
  - `/learn` → `https://learning-ocean.com`
- These are **routes** that map paths to backend services

### ✅ Step 3: Define Routes
- Routes are like:
  - `/order` → goes to Order microservice
  - `/cart` → goes to Cart microservice
- You define which HTTP method (GET, POST, etc.) and which integration to use

### ✅ Step 4: Create Stages
- Stages are like **environments**:
  - `dev`, `staging`, `prod`
- You can deploy different versions of your API to different stages

### ✅ Step 5: Deploy
- After setting up routes and integrations, you **deploy** the API
- AWS gives you a **URL** like:
  ```
  https://abc123.execute-api.us-east-1.amazonaws.com
  ```
- You access routes like:
  ```
  https://abc123.execute-api.us-east-1.amazonaws.com/example
  ```

---

## 🧠 Extra Features in API Gateway

### 🔐 Authentication & Authorization
- Use **Cognito** or **Lambda authorizers** to secure your API

### 📊 Monitoring & Logging
- Integrated with **CloudWatch** for metrics and logs

### 🚦 Rate Limiting
- Prevent abuse by limiting requests per user or IP

### 🧰 Caching
- API Gateway can cache responses to reduce load on backend

### ⚖️ Load Balancing
- Works with multiple backend replicas to distribute traffic

---

## ✅ Summary

| Feature | HTTP API | REST API |
|--------|----------|----------|
| Cost | Low | Higher |
| Speed | Fast | Slower |
| Features | Basic | Advanced |
| Use Case | Simple microservices | Complex production APIs |

---

