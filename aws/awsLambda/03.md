# Execution/Triggering lambda function with the help of function url 

-  function URLs are used to assign HTTP(S) endpoints to your Lambda function.
- Go to Configuration Tab > Function URL > create
- When we create a function url , we get a url https://jxsd3mgr7vyxdsismfxmav4xfm0imxoz.lambda-url.us-east-1.on.aws/ , open it on browser
- our code is currently this which will not work as event parameter is now :- 
```javascript
export const handler = async (event,context) => {
  console.log('event', event)
  console.log('context',context);
  
  // TODO implement
  const number1 = event.number1
  const number2 = event.number2

  const sum = number1 + number2
  const mul = number1 * number2
  const sub = number2 - number1
  const div = number2/number1

  const response = {
    statusCode: 200,
    body: {
        'sum' : sum,
        'sub' : sub,
        'mul' : mul,
        'div' : div
    }
  };
  return response;
};
```

```
2025-08-04T06:49:55.639Z	a8942536-4b2c-4b26-8845-79401fbb287c	INFO	event {
  version: '2.0',
  routeKey: '$default',
  rawPath: '/',
  rawQueryString: '',
  headers: {
    'sec-fetch-mode': 'navigate',
    'x-amzn-tls-version': 'TLSv1.3',
    'sec-fetch-site': 'cross-site',
    'x-forwarded-proto': 'https',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'x-forwarded-port': '443',
    'x-forwarded-for': '182.74.201.138',
    'sec-fetch-user': '?1',
    accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
    'x-amzn-tls-cipher-suite': 'TLS_AES_128_GCM_SHA256',
    'sec-ch-ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"',
    'x-amzn-trace-id': 'Root=1-68905813-33ec8bdf03e103454101ad8a',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    host: 'jxsd3mgr7vyxdsismfxmav4xfm0imxoz.lambda-url.us-east-1.on.aws',
    'upgrade-insecure-requests': '1',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    'sec-fetch-dest': 'document'
  },
  requestContext: {
    accountId: 'anonymous',
    apiId: 'jxsd3mgr7vyxdsismfxmav4xfm0imxoz',
    domainName: 'jxsd3mgr7vyxdsismfxmav4xfm0imxoz.lambda-url.us-east-1.on.aws',
    domainPrefix: 'jxsd3mgr7vyxdsismfxmav4xfm0imxoz',
    http: {
      method: 'GET',
      path: '/',
      protocol: 'HTTP/1.1',
      sourceIp: '182.74.201.138',
      userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36'
    },
    requestId: 'a8942536-4b2c-4b26-8845-79401fbb287c',
    routeKey: '$default',
    stage: '$default',
    time: '04/Aug/2025:06:49:55 +0000',
    timeEpoch: 1754290195352
  },
  isBase64Encoded: false
}

```

- and context is 

```
2025-08-04T06:49:55.653Z	a8942536-4b2c-4b26-8845-79401fbb287c	INFO	context {
  callbackWaitsForEmptyEventLoop: [Getter/Setter],
  succeed: [Function (anonymous)],
  fail: [Function (anonymous)],
  done: [Function (anonymous)],
  functionVersion: '$LATEST',
  functionName: 'firstFunction',
  memoryLimitInMB: '128',
  logGroupName: '/aws/lambda/firstFunction',
  logStreamName: '2025/08/04/[$LATEST]494f91ae4cb742d6aed45bbc2f65f71c',
  clientContext: undefined,
  identity: undefined,
  invokedFunctionArn: 'arn:aws:lambda:us-east-1:864965618223:function:firstFunction',
  awsRequestId: 'a8942536-4b2c-4b26-8845-79401fbb287c',
  tenantId: undefined,
  getRemainingTimeInMillis: [Function: getRemainingTimeInMillis]
}

```

- We see in event parameter , http method is Get and also check raw path which is '/' , if we add parameters in url , then our raw path is according to that (rawPath: '/systumm') and  http: {
      method: 'GET',
      path: '/systumm',
      protocol: 'HTTP/1.1',
      sourceIp: '182.74.201.138',
      userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36'
    },



- Now , we can also do this thing in postman , and also can make post request or other request in postman , and pass the data in postman in raw json format , then our event object will be 

```
2025-08-04T06:58:35.297Z	c5cd8933-eb39-4d33-acfe-ebf254129d2b	INFO	event {
  version: '2.0',
  routeKey: '$default',
  rawPath: '/',
  rawQueryString: '',
  headers: {
    'content-length': '44',
    'x-amzn-tls-version': 'TLSv1.3',
    'x-forwarded-proto': 'https',
    'postman-token': 'd2565604-7bbe-453c-bce7-882b9ef59982',
    'x-forwarded-port': '443',
    'x-forwarded-for': '14.192.0.170',
    accept: '*/*',
    'x-amzn-tls-cipher-suite': 'TLS_AES_128_GCM_SHA256',
    'x-amzn-trace-id': 'Root=1-68905a1b-46e7defe24f3aad81aea2b8b',
    host: 'jxsd3mgr7vyxdsismfxmav4xfm0imxoz.lambda-url.us-east-1.on.aws',
    'content-type': 'application/json',
    'cache-control': 'no-cache',
    'accept-encoding': 'gzip, deflate, br',
    'user-agent': 'PostmanRuntime/7.39.1'
  },
  requestContext: {
    accountId: 'anonymous',
    apiId: 'jxsd3mgr7vyxdsismfxmav4xfm0imxoz',
    domainName: 'jxsd3mgr7vyxdsismfxmav4xfm0imxoz.lambda-url.us-east-1.on.aws',
    domainPrefix: 'jxsd3mgr7vyxdsismfxmav4xfm0imxoz',
    http: {
      method: 'POST',
      path: '/',
      protocol: 'HTTP/1.1',
      sourceIp: '14.192.0.170',
      userAgent: 'PostmanRuntime/7.39.1'
    },
    requestId: 'c5cd8933-eb39-4d33-acfe-ebf254129d2b',
    routeKey: '$default',
    stage: '$default',
    time: '04/Aug/2025:06:58:35 +0000',
    timeEpoch: 1754290715292
  },
  body: '{\r\n    "number1" : 5,\r\n    "number2" : 10\r\n}',
  isBase64Encoded: false
}



```
- In this we see in body , we get required data. but still in retrn we get null {"div":null,"sub":null,"mul":null,"sum":null}   bcause we need to update our code now to get data from body 
- if we just use event.body.number1 and event.body.number2 , then we still get the null because In AWS Lambda (or similar environments), when you make a POST request using Postman, the event.body is usually a string, not a parsed object. 


- we need to parse it first 
```javascript
export const handler = async (event,context) => {
  console.log('event', event)
  console.log('context',context);
  
  const body = JSON.parse(event.body)
  // TODO implement
  console.log('body',body);
  
  const number1 = body.number1
  const number2 = body.number2

  const sum = number1 + number2
  const mul = number1 * number2
  const sub = number2 - number1
  const div = number2/number1

  const response = {
    statusCode: 200,
    body: {
        'sum' : sum,
        'sub' : sub,
        'mul' : mul,
        'div' : div
    }
  };
  return response;
};

```
- now we get the request result {"div":2,"sub":5,"mul":50,"sum":15}
- You're seeing the response keys in a different order ({"div":2,"sub":5,"mul":50,"sum":15}) because JavaScript objects do not guarantee key order, especially when the keys are strings that don't follow numeric sorting.Object keys that are strings (like "sum", "sub", etc.) are stored in insertion order most of the time, but not always guaranteed when serialized (like in JSON.stringify()).Numeric keys are sorted in ascending order.Some environments (like Node.js or browsers) may reorder keys during serialization.

- Also it is recommend to string the body response  , to prevent from serialization and  many more things 
- Also depends on events , this event object will be differnet , like for s3 it is different and similar like for other type of events 
- if we make a get request instead of post , the code still works because we need to add condition for request like 

```javascript
export const handler = async (event,context) => {
  console.log('event', event)
  console.log('context',context);

  if(event.requestContext.http.method !== 'POST'){
    return {
      statusCode : 400,
      body : JSON.stringify('bad reqeuest , only post required allowed ')
    }
  }
  
  const body = JSON.parse(event.body)
  // TODO implement
  console.log('body',body);
  
  const number1 = body.number1
  const number2 = body.number2

  const sum = number1 + number2
  const mul = number1 * number2
  const sub = number2 - number1
  const div = number2/number1

  const response = {
    statusCode: 200,
    body: JSON.stringify({
        'sum' : sum,
        'sub' : sub,
        'mul' : mul,
        'div' : div
    })
  };
  return response;
};

```