# Lambda Destinations

- you run a lambda function , got the output and not you can use this output as input for other value and this other value can be either a lambda function , or a SNS or a queue etc. 

- create a lambda function lambda-dest-demo 
```javascript
export const handler = async (event) => {

  console.log('event value in lambda-dest-demo lambda function',event)
  
  const response = {
    statusCode: 200,
    body: JSON.stringify({
      name : 'ansh gupta',
      age : 22,
    }),
  };
  return response;
};

```

- now click on add destination button beside add trigger . 
- Also output will go to destination only when you lambda function is called asychronously 

- select condition like on failure
- on destination type , select where output of lambda function goes so choose SNS topic 

- now choose arn of destination 


- now you can add one more destination , on success 


- now you can call this lambda-dest-demo either by adding trigger s3 or by command line 
```
aws lambda invoke --function-name lambda-dest-demo --invocation-type Event output.txt
```


- Now create one more destination for lamdba function , choose any lambda function (let's say choose event-context lambda function where we are just printing event and context )and check logs for event 

```
2025-08-13T06:12:06.008Z	330e37da-a200-4340-8b8b-794362189bf0	INFO	event trigged in event-context lambda {
    "version": "1.0",
    "timestamp": "2025-08-13T06:12:05.454Z",
    "requestContext": {
        "requestId": "682bebb9-2098-4963-b970-0fd82e4fd877",
        "functionArn": "arn:aws:lambda:us-east-1:864965618223:function:lambda-dest-demo:$LATEST",
        "condition": "Success",
        "approximateInvokeCount": 1
    },
    "requestPayload": {},
    "responseContext": {
        "statusCode": 200,
        "executedVersion": "$LATEST"
    },
    "responsePayload": {
        "statusCode": 200,
        "body": "{\"name\":\"ansh gupta\",\"age\":22}"
    }
}


```

```
2025-08-13T06:12:06.030Z	330e37da-a200-4340-8b8b-794362189bf0	INFO	context trigger in event-context lamdba  {
    "callbackWaitsForEmptyEventLoop": true,
    "functionVersion": "$LATEST",
    "functionName": "event-context",
    "memoryLimitInMB": "128",
    "logGroupName": "/aws/lambda/event-context",
    "logStreamName": "2025/08/13/[$LATEST]724b132a06dc42469fbcdf5fac574f78",
    "invokedFunctionArn": "arn:aws:lambda:us-east-1:864965618223:function:event-context",
    "awsRequestId": "330e37da-a200-4340-8b8b-794362189bf0"
}

```

```
2025-08-13T06:12:05.301Z	682bebb9-2098-4963-b970-0fd82e4fd877	INFO	event value in lambda-dest-demo lambda function {}

```


# doubts
- requestPayload is the original event that was sent to the source Lambda function (lambda-dest-demo) when it was invoked.

➤ Why is it empty ({}) in your case?
Because when you invoked lambda-dest-demo using the CLI, you did not pass any payload.

- Then event inside lambda-dest-demo would be {}, and that same {} would appear in requestPayload in the destination Lambda.


➤ Important: The response from the destination Lambda (event-context) is not stored or forwarded anywhere by default.
Lambda Destinations are one-way: AWS sends the result of the source Lambda to the destination, but it does not capture or return the destination’s response.

So:

The response from lambda-dest-demo is captured and sent to event-context.
The response from event-context is executed and logged, but not returned to the original caller or stored.

If you want to capture or forward the response from event-context, you’d need to:

Send it to an SQS queue, SNS topic, or a database.
Or use EventBridge to route it somewhere else.




- AWS Lambda allows you to configure only two destinations for asynchronous invocations of a function:
- On Success Destination: This destination is invoked when the Lambda function successfully completes its execution.
- On Failure Destination: This destination is invoked when the Lambda function fails to execute or encounters an error during execution.-