- So to access private instance :-

- a common terminology is used called jump server 
- we know there is connectivity between your public and private instance. both can ping each other 

- So from public instance (instance in public subnet ), we SSH our private instance . The server inside public instance is called jump server. 
- Not all server, only that server which is used to access private subnet from this public instance is jump server.
- Jump server is also called basition host 


- So connect public instance , from your computer command prompt 

- for this we must have the ssh key donwloaded in our computer 

- write command 
```
ssh -i .\key_name ubuntu@public_instance_public_ip_address
```

- now we are connected to our public instance or jump server or bastion host
- now we have to go to private instance . for this also we need that key 

- create a new key on that public instance and paste the key content 
```
vim new_key.pem
```

- also change the permission of this key file to read only by user 
```
chmod 400 new_key.pem
```

- now try to access private instance 

```
ssh -i new_key.pem ubuntu@private_instance_private_ipv4_address
```

- now we have accessed our private instance 

- now try to run commands on this 
```
ping 8.8.8.8

curl google.com
```

- we see it can't run  becasue internet is not working on this private instance which means we can't install any software on this 

- Now to run internet on this private instance , there are multiple ways 

- if private instance need anything from internet , he will ask to public instance and public instance will get from internet 

- this is done using NAT

- eg. we have router in our home , so public address is attached to our router .Private  ip address will be attached to our mobiles . if 15 devices are there , so all these 15 devices have different private ip address and all these 15 devices if send request to internet , then the public ip address is of your router. 

- create an ec2 instance which is nat instance which is internally configurred as to transfer network. 
- name it nat-instance
- there is special ami for nat
- in network settings , choose your vpc 
- Also this instance will be created in your public network because traffic need to go outside . Private will send the traffic to this but this instance have to send traffic to internet .
- enable all traffic in security group 
- also nat instance must have elastic ip attached . 
- not the internet still not works to your private instance 
- it is because in the route of private instance , we have only 1 rule 
```
192.168.0.0/16
local
```

- which means any request withing this ip range remain in local 
- and we are requesting 8.8.8.8 in this private instance so it means it will not work 

- so add a route allowing all request 0.0.0.0 to a ec2 instance and that instance will be your NAT instance 
- now try to make request 
```
```
ping 8.8.8.8

curl google.com
```
```
- we see it still does not work beacause 
```
suppose,
ip address of nat-instance : 1.2.3.4
ip address of private-instance : 5.6.7.8

```

- Now this private instance hit request for google.com which goes to net-instance (because we define in route table). Now when the response come, response(which is webpage) should serve  to private insance ip-address but nat-instance see that ip address of response is not in his range so he will not accept the response . Means nat always check if response is in the range of his source/destination ip address, only then it accepts

- to solve this problem , click on nat-instance and go to networking and change source/destination check , stop it and save it 

- now access the private instance from public instance and now try to access internet in private instance 
```
```
ping 8.8.8.8

curl google.com
```
```

- it will work now . we can install any updates , but request from outside will not be accepted by private instance 
- private request can make request using NAT 

